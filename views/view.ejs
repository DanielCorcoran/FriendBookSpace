<% include partials/header %>

<h1>This is the view template</h1>

<h3><%= status.author.username %></h3>
<p><%= status.text %></p>
<% if (currentUser && status.author.id.equals(currentUser._id)) { %>
    <a href="/feed/<%= status._id %>/edit" class="btn btn-warning">Edit</a>
    <form action="/feed/<%= status.id %>?_method=DELETE" method="POST">
        <button class="btn btn-danger">Delete Status</button>
    </form>
<% } %>

<% status.comments.forEach((comment) => { %>
    <p>
        <strong><%= comment.author.username %></strong> - <%= comment.text %>
    </p>
    <a href="/feed/<%= status._id %>/<%= comment._id %>/edit" class="btn btn-xs btn-warning">Edit</a>
<% }); %>

<div class="container">
    <div class="row">
        <h1 style="text-align: center;">Comment on this post</h1>

        <div style="width: 30%; margin: 2rem auto;">
            <form action="/feed/<%= status._id %>" method="POST">
                <div class="form-group">
                    <input class="form-control" type="text" name="comment[text]" placeholder="comment">
                </div>
                <div class="form-group">
                    <button class="btn btn-lg btn-primary btn-block">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

<% include partials/footer %>